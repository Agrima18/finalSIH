<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="/js/Gemini_Generated_Image_xu13zpxu13zpxu13-removebg-preview (1).png">
  <title>Vaayu | AQI Dashboard (Light Theme)</title>
  

  <!-- Bootstrap, Font Awesome, Leaflet -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

  <style>
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: 
        linear-gradient(to bottom, rgba(135, 206, 250, 0.85), rgba(255, 255, 255, 0.9)),
        url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=2000&q=80');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-repeat: no-repeat;
      color: #2b2d42;
      min-height: 100vh;
      padding-top: 80px;
      position: relative;
      overflow-x: hidden;
    }

    /* ‚ú® Glass Card */
    .glass {
      background: rgba(255, 255, 255, 0.7);
      border: 1px solid rgba(0,0,0,0.08);
      border-radius: 18px;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      padding: 20px;
      transition: transform 0.2s ease;
    }
     @media (max-width: 768px) {
      header {
        text-align: center;
        padding: 20px 0;
      }
      main {
        grid-template-columns: 1fr !important;
        gap: 20px;
      }
      .map-glass {
        height: 350px;
      }
      svg {
        width: 100%;
        height: auto;
      }
    }
    .glass:hover { transform: translateY(-2px); }

    /* üé¥ AQI Cards */
    .glass-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 15px;
      margin-top: 30px;
    }
    .modern-card {
      text-align: center;
    }
    .modern-card i {
      font-size: 1.6rem;
      color: #0077b6;
      margin-bottom: 6px;
    }
    .modern-card h5 { color: #1b1e3f; font-size: 1rem; font-weight: 600; }
    .modern-card p { color: #343a40; font-size: 0.9rem; margin: 4px 0 0; }

    /* üîç Search */
    .search-bar input {
      background: rgba(255,255,255,0.7);
      border: 1px solid rgba(0,0,0,0.1);
      color: #2b2d42;
    }
    .search-bar input::placeholder { color: #6c757d; }
    .modern-button {
      background: rgba(0,119,182,0.85);
      color: #fff;
      border: none;
      transition: all 0.3s ease;
      border-radius: 8px;
      font-size: 0.9rem;
      padding: 6px 16px;
    }
    .modern-button:hover {
      background: rgba(0,150,199,1);
      transform: scale(1.05);
    }

    /* üß≠ Map + Leaderboard Grid */
    .map-section {
      display: grid;
      grid-template-columns: 2fr 1.2fr;
      gap: 20px;
      margin-top: 25px;
    }
    @media (max-width: 992px) { 
      .map-section { grid-template-columns: 1fr; }
      .side-decor { display: none; }
    }

    /* üó∫Ô∏è Map Container */
    #aqiMap {
      width: 100%;
      height: 450px;
      border-radius: 18px;
      border: 1px solid rgba(0,0,0,0.1);
      box-shadow: 0 6px 18px rgba(0,0,0,0.15);
    }

    /* üèÜ Leaderboard */
    .leaderboard-card { max-height: 450px; overflow-y: auto; }
    .leaderboard-item {
      background: rgba(255,255,255,0.6);
      border: 1px solid rgba(0,0,0,0.05);
      border-radius: 12px;
      padding: 10px 15px;
      margin-bottom: 10px;
      font-size: 0.9rem;
    }
    .leaderboard-item:hover { background: rgba(255,255,255,0.8); }

    .city-name { font-weight: 600; color: #1b1e3f; }
    .aqi-value { color: #0077b6; font-weight: 600; font-size: 0.9rem; }
    .progress { height: 6px; border-radius: 999px; background: rgba(0,0,0,0.05); }
    .progress-bar { border-radius: 999px; }

    /* üßæ WHO Card */
    .who-card {
      margin-top: 25px;
      font-size: 0.9rem;
    }
    .who-card table { text-align: center; border-collapse: collapse; }
    .who-card th, .who-card td {
      border: 1px solid rgba(0,0,0,0.1);
      padding: 8px;
      font-size: 0.85rem;
    }
    .who-card th { background: #0077b6; color: white; }
    .who-card td { background: rgba(255,255,255,0.6); }

    /* Smaller AQI Value */
    #aqiValue h1 {
      font-size: 1.8rem;
      font-weight: 700;
      margin: 0;
    }

    /* üñºÔ∏è Decorative Side Images */
    .side-decor {
      position: absolute;
      opacity: 0.15;
      z-index: 0;
      pointer-events: none;
      user-select: none;
    }
    .decor-left {
      left: 2%;
      top: 35%;
      width: 220px;
      transform: rotate(-6deg);
    }
    .decor-right {
      right: 2%;
      top: 25%;
      width: 260px;
      transform: rotate(5deg);
    }
  </style>
</head>
<body>
  <!-- üèõÔ∏è Decorative Images -->
  <img src="https://upload.wikimedia.org/wikipedia/commons/d/d0/India_Gate_in_New_Delhi_03-2016_img3.jpg" 
       alt="India Gate" class="side-decor decor-left">
  <img src="https://upload.wikimedia.org/wikipedia/commons/d/da/Taj-Mahal.jpg" 
       alt="Taj Mahal" class="side-decor decor-right">

  <div class="container mt-4 position-relative">
   <h2 class="text-center mb-4">
    <img src="/images/your-logo-name.png" alt="Vaayu Logo" class="heading-logo"> Vaayu | Dashboard
</h2>

    <div class="search-bar d-flex justify-content-center gap-3 mb-4">
      <input type="text" id="cityInput" class="form-control w-50" placeholder="Search by City...">
      <button id="searchBtn" class="btn modern-button"><i class="fas fa-search"></i> Search</button>
    </div>

    <h4 class="mb-3"><span id="cityName">California</span> Air Quality</h4>

    <div class="glass-grid">
      <div class="glass modern-card" id="card-aqi">
        <i class="fas fa-tachometer-alt"></i>
        <h5>Air Quality Index</h5>
        <p id="aqiValue"><h1>--</h1></p>
      </div>
      <div class="glass modern-card"><i class="fas fa-smog"></i><h5>PM2.5</h5><p id="pm25">-- Œºg/m¬≥</p></div>
      <div class="glass modern-card"><i class="fas fa-cloud"></i><h5>PM10</h5><p id="pm10">-- Œºg/m¬≥</p></div>
      <div class="glass modern-card"><i class="fas fa-industry"></i><h5>NO‚ÇÇ</h5><p id="no2">-- Œºg/m¬≥</p></div>
      <div class="glass modern-card"><i class="fas fa-burn"></i><h5>CO</h5><p id="co">-- Œºg/m¬≥</p></div>
    </div>

    <!-- WHO Standards -->
    <div class="glass who-card">
      <h4 class="mb-3"><i class="fas fa-globe-asia text-primary"></i> WHO Recommended Air Quality Guidelines</h4>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Pollutant</th>
            <th>24-hour Mean Limit</th>
            <th>Annual Mean Limit</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>PM2.5</td><td><strong>15 Œºg/m¬≥</strong></td><td>5 Œºg/m¬≥</td></tr>
          <tr><td>PM10</td><td>45 Œºg/m¬≥</td><td>15 Œºg/m¬≥</td></tr>
          <tr><td>NO‚ÇÇ</td><td>25 Œºg/m¬≥</td><td>10 Œºg/m¬≥</td></tr>
          <tr><td>CO</td><td>4 mg/m¬≥ (8-hr mean)</td><td>‚Äî</td></tr>
        </tbody>
      </table>
      <p class="text-muted small mb-0">Source: <a href="https://www.who.int/publications/i/item/9789240034228" target="_blank">WHO Air Quality Guidelines 2021</a></p>
    </div>

    <div class="map-section">
      <div id="aqiMap" class="glass"></div>
      <div class="glass leaderboard-card">
        <h3><i class="fas fa-list-ol text-primary"></i> Global AQI Rankings</h3>
        <div id="loadingText" class="text-center mb-3">
          <div class="spinner-border text-primary"></div>
          <p>Loading cities...</p>
        </div>
        <div id="leaderboard"></div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <script>
    const API_KEY = "2f56c48aff4ee1bff3b0c22fcfd7e488";
    const CITIES_TO_FETCH = ["Delhi", "Mumbai", "London", "Tokyo", "New York", "Paris", "Sydney", "Beijing", "Dubai", "Singapore"];
    const aqiLabels = ['Good','Fair','Moderate','Poor','Very Poor'];
    const colors = ['#4caf50', '#cddc39', '#ff9800', '#f44336', '#6a1b9a'];

    let map = L.map('aqiMap').setView([20, 0], 2.5);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    async function fetchCityCoordinates(city) {
      const res = await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${city}&limit=1&appid=${API_KEY}`);
      const data = await res.json();
      if (!data.length) throw new Error("City not found");
      return { lat: data[0].lat, lon: data[0].lon, name: data[0].name };
    }

    async function fetchAQIData(lat, lon) {
      const res = await fetch(`https://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${lon}&appid=${API_KEY}`);
      const data = await res.json();
      return data.list[0];
    }

    function updateDashboard(name, data) {
      const c = data.components;
      const aqi = data.main.aqi;
      const color = colors[aqi - 1];
      document.getElementById("cityName").textContent = name;
      document.getElementById("aqiValue").innerHTML = `<h1 style="color:${color}">${aqi} (${aqiLabels[aqi-1]})</h1>`;
      document.getElementById("pm25").textContent = `${c.pm2_5.toFixed(1)} Œºg/m¬≥`;
      document.getElementById("pm10").textContent = `${c.pm10.toFixed(1)} Œºg/m¬≥`;
      document.getElementById("no2").textContent = `${c.no2.toFixed(1)} Œºg/m¬≥`;
      document.getElementById("co").textContent = `${c.co.toFixed(1)} Œºg/m¬≥`;
    }

    async function generateLeaderboard() {
      const results = [];
      for (const city of CITIES_TO_FETCH) {
        try {
          const { lat, lon, name } = await fetchCityCoordinates(city);
          const data = await fetchAQIData(lat, lon);
          results.push({ name, aqi: data.main.aqi, lat, lon });
        } catch {}
      }
      results.sort((a, b) => b.aqi - a.aqi);
      const board = document.getElementById("leaderboard");
      board.innerHTML = "";
      results.forEach((r, i) => {
        const color = colors[r.aqi - 1];
        board.innerHTML += `
          <div class="leaderboard-item">
            <div class="d-flex justify-content-between">
              <span class="city-name">${i+1}. ${r.name}</span>
              <span class="aqi-value" style="color:${color}">${r.aqi} - ${aqiLabels[r.aqi-1]}</span>
            </div>
            <div class="progress mt-1">
              <div class="progress-bar" style="width:${(r.aqi/5)*100}%; background:${color}"></div>
            </div>
          </div>`;
        L.circleMarker([r.lat, r.lon], {radius:6, color, fillColor:color, fillOpacity:0.8})
          .addTo(map).bindPopup(`<b>${r.name}</b><br>AQI: ${r.aqi} (${aqiLabels[r.aqi-1]})`);
      });
      document.getElementById("loadingText").style.display = "none";
      const top = results[0];
      const topData = await fetchAQIData(top.lat, top.lon);
      updateDashboard(top.name, topData);
    }

    document.getElementById("searchBtn").addEventListener("click", async () => {
      const city = document.getElementById("cityInput").value.trim();
      if (!city) return alert("Enter a city name!");
      try {
        const { lat, lon, name } = await fetchCityCoordinates(city);
        const data = await fetchAQIData(lat, lon);
        map.setView([lat, lon], 6);
        updateDashboard(name, data);
      } catch {
        alert("City not found!");
      }
    });

    generateLeaderboard();
  </script>
</body>
</html>



