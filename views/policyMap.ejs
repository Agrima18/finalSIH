<!DOCTYPE html>
<html lang="en">
<head>
Â Â Â  <meta
charset="UTF-8" />
Â Â Â  <meta
name="viewport" content="width=device-width,
initial-scale=1" />
Â Â Â  <title>Vaayu
â€“ <%= zoneName %> | Delhi Air Policy Dashboard</title>
Â Â Â  <script
src="https://cdn.tailwindcss.com"></script>
Â Â Â Â <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
Â Â Â Â <style>
Â Â Â Â Â Â Â  /* 1. TONE
DOWN BACKGROUND and BASE STYLES for FORMALITY */
Â Â Â Â Â Â Â  body {
Â  font-family: 'Segoe
UI', 'Poppins', sans-serif;
Â  background: 
Â Â Â linear-gradient(135deg, rgba(227, 242, 253, 0.9), rgba(255, 255, 255,
0.95)),
Â Â Â url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=2000&q=80');
Â  background-size:
cover;
Â  background-position:
center;
Â  background-repeat:
no-repeat;
Â background-attachment: fixed;
Â  color: #2b2d42;
Â  min-height: 100vh;
Â  display: flex;
Â  flex-direction:
column;
Â  align-items: center;
Â  justify-content:
flex-start;
Â  text-align: center;
Â  padding: 80px 20px
40px;
Â  transition:
background 0.6s ease, color 0.6s ease;
}
Â 
Â 
Â  /* ğŸ§Š
Glassmorphic Cards */
Â  .card {
Â Â Â  border: none;
Â Â Â  border-radius:
20px;
Â Â Â  background:
rgba(255, 255, 255, 0.75);
Â Â Â  backdrop-filter:
blur(15px);
Â Â Â  box-shadow: 0 8px
24px rgba(0, 123, 255, 0.08);
Â Â Â  transition:
transform 0.25s ease, box-shadow 0.25s ease;
Â  }
Â  .card:hover {
Â Â Â  transform:
translateY(-4px);
Â Â Â  box-shadow: 0 10px
28px rgba(0, 119, 182, 0.25);
Â  }
Â 
Â  /* âœ¨
Card Header Text Gradient */
Â  .card-header {
Â Â Â  background:
linear-gradient(90deg, #009ffd, #2a2a72);
Â Â Â -webkit-background-clip: text;
Â Â Â -webkit-text-fill-color: transparent;
Â Â Â  font-weight: 700;
Â Â Â  font-size:
1.05rem;
Â Â Â  border-bottom: 1px
solid rgba(0, 0, 0, 0.05);
Â  }
Â Â Â Â Â Â Â  h1, h2, h3 {
color: #0c4a6e; }
Â 
Â Â Â  /* ğŸ’ 
White Cards */
Â Â Â  .glass, .map-glass
{
Â Â Â Â Â  background:
#ffffff;
Â Â Â Â Â  border: 1px
solid #e2e8f0;
Â Â Â Â Â  border-radius:
0.75rem;
Â Â Â Â Â  box-shadow: 0
4px 10px rgba(0, 0, 0, 0.05);
Â Â Â Â Â  color: #1e293b;
Â Â Â  }
Â 
Â Â Â  /* ğŸ—ºï¸
Map Card */
Â Â Â  .map-glass {
Â Â Â Â Â  position:
relative;
Â Â Â Â Â  overflow:
hidden;
Â Â Â  }
Â 
Â Â Â  /* ğŸ”²
Inputs */
Â Â Â  input, select {
Â Â Â Â Â  background:
#f8fafc;
Â Â Â Â Â  border: 1px
solid #cbd5e1;
Â Â Â Â Â  color: #1e293b;
Â Â Â Â Â  border-radius:
6px;
Â Â Â Â Â  padding: 0.5rem
0.75rem;
Â Â Â Â Â  width: 100%;
Â Â Â Â Â  transition: all
0.3s ease;
Â Â Â  }
Â Â Â  input:focus,
select:focus {
Â Â Â Â Â  outline: none;
Â Â Â Â Â  border-color:
#38bdf8;
Â Â Â Â Â  box-shadow: 0 0
0 3px rgba(56,189,248,0.2);
Â Â Â  }
Â 
Â Â Â  button {
Â Â Â Â Â  font-weight:
600;
Â Â Â Â Â  transition:
background 0.3s ease, transform 0.2s ease;
Â Â Â  }
Â Â Â  button:hover {
Â Â Â Â Â  transform:
translateY(-1px);
Â Â Â  }
Â 
Â Â Â  /* ğŸ©
Donut Center */
Â Â Â  .donutCenter {
Â Â Â Â Â  position:
absolute;
Â Â Â Â Â  inset: 0;
Â Â Â Â Â  display: grid;
Â Â Â Â Â  place-items:
center;
Â Â Â Â Â  text-align:
center;
Â Â Â Â Â  font-weight:
600;
Â Â Â Â Â  font-size:
1.25rem;
Â Â Â Â Â  color: #1e293b;
Â Â Â  }
Â 
Â Â Â  /* ğŸ§­
Tooltip */
Â Â Â  .tooltip {
Â Â Â Â Â  position:
absolute;
Â Â Â Â Â  pointer-events:
none;
Â Â Â Â Â  background:
#ffffff;
Â Â Â Â Â  border: 1px
solid #cbd5e1;
Â Â Â Â Â  padding: 6px
10px;
Â Â Â Â Â  font-size:
0.9rem;
Â Â Â Â Â  border-radius:
6px;
Â Â Â Â Â  box-shadow: 0
2px 8px rgba(0, 0, 0, 0.1);
Â Â Â Â Â  color: #1e293b;
Â Â Â Â Â  z-index: 50;
Â Â Â  }
Â 
Â Â Â  /* ğŸ§±
Table */
Â Â Â  table {
Â Â Â Â Â  color: #1e293b;
Â Â Â Â Â  border-collapse:
collapse;
Â Â Â  }
Â Â Â  thead {
Â Â Â Â Â background-color: #e0f2fe;
Â Â Â Â Â  font-weight:
600;
Â Â Â  }
Â Â Â  tbody tr:hover {
Â Â Â Â Â background-color: #f1f5f9;
Â Â Â Â Â  transition:
0.3s;
Â Â Â  }
Â Â Â  th, td {
Â Â Â Â Â  border: 1px
solid #e2e8f0;
Â Â Â Â Â  padding: 0.75rem
1rem;
Â Â Â Â Â  text-align:
left;
Â Â Â  }
Â 
Â Â Â  /* ğŸŸ¦
Hex Map */
Â Â Â  .hex {
Â Â Â Â Â  fill: #e0f2fe;
Â Â Â Â Â  stroke: #0284c7;
Â Â Â Â Â  stroke-width:
1.5;
Â Â Â Â Â  transition: fill
0.3s;
Â Â Â  }
Â Â Â  .hex:hover { fill:
#7dd3fc; cursor: pointer; }
Â Â Â  .hex.active {
fill: #38bdf8; }
Â 
Â Â Â  /* ğŸ§ 
AI Suggestion Cards */
Â Â Â Â  @media
(max-width: 768px) {
Â Â Â Â Â  header {
Â Â Â Â Â Â Â  text-align:
center;
Â Â Â Â Â Â Â  padding: 20px
0;
Â Â Â Â Â  }
Â Â Â Â Â  main {
Â Â Â Â Â Â Â grid-template-columns: 1fr !important;
Â Â Â Â Â Â Â  gap: 20px;
Â Â Â Â Â  }
Â Â Â Â Â  .map-glass {
Â Â Â Â Â Â Â  height: 350px;
Â Â Â Â Â  }
Â Â Â Â Â  svg {
Â Â Â Â Â Â Â  width: 100%;
Â Â Â Â Â Â Â  height: auto;
Â Â Â Â Â  }
Â Â Â  }
Â Â Â  .ai-card {
Â Â Â Â Â  background:
#f8fafc;
Â Â Â Â Â  border: 1px
solid #e2e8f0;
Â Â Â Â Â  border-radius:
8px;
Â Â Â Â Â  padding: 10px;
Â Â Â Â Â  transition:
background 0.3s;
Â Â Â  }
Â Â Â  .ai-card:hover {
background: #e0f2fe; }
Â  </style>
</head>
</head>
Â 
<body class="text-slate-50">
Â Â Â  <header
class="max-w-7xl mx-auto px-4 pt-6 pb-4 text-center">
Â Â Â Â Â Â Â  <h1
class="text-sky-800">Vaayu â€“ Delhi Air Policy Dashboard</h1>
Â Â Â Â Â Â Â  <p
class="text-slate-800 mt-2 text-base">Explore 33 sub-divisionsâ€™
air quality interventions</p>
Â Â Â Â Â Â Â  <h2
class="mt-4 text-sky-800">Selected Zone: <%= zoneName
%></h2>
Â Â Â  </header>
Â 
Â Â Â  <main
class="max-w-7xl mx-auto grid grid-cols-12 gap-6 px-4 pb-16">
Â 
Â Â Â Â Â Â Â  <aside
class="col-span-12 md:col-span-3 glass p-6 border
border-white/10">
Â Â Â Â Â Â Â Â Â Â Â  <label
class="text-sm font-semibold text-sky-800">Search Policy
Database</label>
Â Â Â Â Â Â Â Â Â Â Â  <input
id="search" type="text" placeholder="Search
policies..." 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â class="w-full mt-2 border border-white/30 bg-white/10 text-slate-800
placeholder-slate-500 rounded px-4 py-2 focus:outline-none focus:ring-2
focus:ring-sky-400">
Â 
Â Â Â Â Â Â Â Â Â Â Â  <div
class="mt-6">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label class="font-semibold text-sky-800">Filter by
Policy Category</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="mt-3 space-y-2 text-slate-700 text-base">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label class="flex items-center gap-2"><input
type="checkbox" value="Regulation"
class="catItem"> Regulation</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label class="flex items-center gap-2"><input
type="checkbox" value="Dust Control"
class="catItem"> Dust Control</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label class="flex items-center gap-2"><input
type="checkbox" value="Traffic Mgmt"
class="catItem"> Traffic Mgmt</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label class="flex items-center gap-2"><input
type="checkbox" value="Technology"
class="catItem"> Technology</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label class="flex items-center gap-2"><input
type="checkbox" value="Monitoring"
class="catItem"> Monitoring</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label class="flex items-center gap-2"><input
type="checkbox" value="Source Control"
class="catItem"> Source Control</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label class="flex items-center gap-2"><input
type="checkbox" value="EV & Mobility"
class="catItem"> EV & Mobility</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â </div>
Â 
Â Â Â Â Â Â Â Â Â Â Â  <button
id="resetBtn" class="mt-6 w-full bg-sky-600 text-slate-800
py-2.5 rounded hover:bg-sky-500 text-lg transition duration-200">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  Reset
Filters
Â Â Â Â Â Â Â Â Â Â Â </button>
Â Â Â Â Â Â Â  </aside>
Â 
Â Â Â Â Â Â Â  <section
class="col-span-12 md:col-span-6 map-glass p-6 border border-white/10
relative">
Â Â Â Â Â Â Â Â Â Â Â  <h2
class="font-semibold mb-4 text-sky-800 text-xl">Delhi Sub-Division
Hex Map</h2>
Â Â Â Â Â Â Â Â Â Â Â  <svg
id="hexMap" viewBox="0 0 1200 800" class="w-full
max-w-none"></svg>
Â Â Â Â Â Â Â Â Â Â Â  <div
id="tooltip" class="tooltip hidden"></div>
Â Â Â Â Â Â Â </section>
Â 
Â Â Â Â Â Â Â  <section
class="col-span-12 md:col-span-3 glass p-6 border
border-white/10">
Â Â Â Â Â Â Â Â Â Â Â  <h2
class="text-slate-700 text-base">Policy Category
Distribution</h2>
Â Â Â Â Â Â Â Â Â Â Â  <h3
class="font-semibold text-sky-800 mt-1 text-xl"
id="donutTitle">Policy Type â€“ All Zones</h3>
Â Â Â Â Â Â Â Â Â Â Â  <div
class="relative mt-4">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <canvas id="donut"
height="280"></canvas>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div id="donutCenter"
class="donutCenter">0<br>Policies</div>
Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â  <ul
id="legend" class="mt-5 space-y-2 text-base text-slate-700"></ul>
Â Â Â Â Â Â Â </section>
Â 
Â Â Â Â Â Â Â  <section
class="col-span-12 glass p-6 border border-white/10">
Â Â Â Â Â Â Â Â Â Â Â  <h3
class="font-semibold text-xl mb-3 text-sky-800">AI Recommendations
(Targeted Interventions)</h3>
Â Â Â Â Â Â Â Â Â Â Â  <div
id="aiCards" class="grid md:grid-cols-3 gap-4 text-base text-slate-700"></div>
Â Â Â Â Â Â Â </section>
Â 
Â Â Â Â Â Â Â  <section
class="col-span-12 glass p-6 border border-white/10 mt-4">
Â Â Â Â Â Â Â Â Â Â Â  <div
class="flex justify-between items-center mb-5">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <h3
class="font-semibold text-xl text-sky-800">Detailed Policy
List</h3>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="flex items-center gap-3 text-base text-slate-700">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="itemsPerPage">Items per page:</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <select id="itemsPerPage" class="border
border-white/30 bg-white/10 text-slate-800 rounded px-3 py-1.5">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="10">10</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="25">25</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="50">50</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="100" selected>100</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </select>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â  <div
class="overflow-x-auto">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <table class="min-w-full border border-white/20 text-base
text-slate-100">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <thead class="bg-white/10 text-slate-700">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <tr>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <th class="px-4 py-3 text-left border
border-white/20">Zone</th>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <th class="px-4 py-3 text-left border
border-white/20">Title of Policy</th>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <th class="px-4 py-3 text-left border
border-white/20">Year</th>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <th class="px-4 py-3 text-left border
border-white/20">Category</th>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <th class="px-4 py-3 text-left border
border-white/20">Description</th>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <th class="px-4 py-3 text-center border
border-white/20">Link</th>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </tr>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </thead>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <tbody id="policyTable" class="divide-y
divide-white/10"></tbody>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </table>
Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â  <div
class="flex justify-between items-center mt-4 text-base text-slate-700">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <p
id="pageInfo"></p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="space-x-3">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button id="prevPage" class="px-4 py-2 bg-white/10
border border-white/20 rounded hover:bg-white/20">Prev</button>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button id="nextPage" class="px-4 py-2 bg-white/10
border border-white/20 rounded hover:bg-white/20">Next</button>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â </section>
Â Â Â  </main>
Â 
Â 
Â Â Â  <script>
Â Â Â  // ---
Configuration and Data ---
Â Â Â  const HEX_SIZE =
100, SQRT3 = Math.sqrt(3);
Â 
Â Â Â  const categories =
["Regulation","Dust Control","Traffic
Mgmt","Technology","Monitoring","Source
Control","EV & Mobility"];
Â Â Â  const chartColors
= {
Â Â Â Â Â Â Â "Regulation": "#fca5a5",
Â Â Â Â Â Â Â  "Dust
Control": "#fcd34d",
Â Â Â Â Â Â Â  "Traffic
Mgmt": "#93c5fd",
Â Â Â Â Â Â Â "Technology": "#a5b4fc",
Â Â Â Â Â Â Â "Monitoring": "#d1d5db",
Â Â Â Â Â Â Â  "Source
Control": "#6ee7b7",
Â Â Â Â Â Â Â  "EV &
Mobility": "#c4b5fd"
Â Â Â  };
Â 
Â Â Â  const subdivisions
= [
Â Â Â Â Â Â Â  { id:
"civil-lines", name: "Civil Lines", q: 0, r: 0 },
Â Â Â Â Â Â Â  { id:
"narela", name: "Narela", q: 2, r: -2 },
Â Â Â Â Â Â Â  { id:
"sadar-bazar", name: "Sadar Bazar", q: 1, r: 0 },
Â Â Â Â Â Â Â  { id:
"kotwali", name: "Kotwali", q: 0, r: -1 },
Â Â Â Â Â Â Â  { id:
"model-town", name: "Model Town", q: 1, r: -1 },
Â Â Â Â Â Â Â  { id:
"karol-bagh", name: "Karol Bagh", q: -1, r: 0 },
Â Â Â Â Â Â Â  { id:
"chanakyapuri", name: "Chanakyapuri", q: -2, r: 0 },
Â Â Â Â Â Â Â  { id:
"parliament-street", name: "Parliament Street", q: -1, r:
-1 },
Â Â Â Â Â Â Â  { id:
"saraswati-vihar", name: "Saraswati Vihar", q: 1, r: 1 },
Â Â Â Â Â Â Â  { id:
"vivek-vihar", name: "Vivek Vihar", q: 2, r: 0 },
Â Â Â Â Â Â Â  { id:
"preet-vihar", name: "Preet Vihar", q: 2, r: 1 },
Â Â Â Â Â Â Â  { id:
"shahdara", name: "Shahdara", q: 3, r: 0 },
Â Â Â Â Â Â Â  { id:
"seemapuri", name: "Seemapuri", q: 3, r: 1 },
Â Â Â Â Â Â Â  { id:
"seelampur", name: "Seelampur", q: 2, r: -1 },
Â Â Â Â Â Â Â  { id:
"kalkaji", name: "Kalkaji", q: -1, r: 2 },
Â Â Â Â Â Â Â  { id:
"defence-colony", name: "Defence Colony", q: -1, r: 1 },
Â Â Â Â Â Â Â  { id:
"hauz-khas", name: "Hauz Khas", q: -2, r: 2 },
Â Â Â Â Â Â Â  { id:
"saket", name: "Saket", q: -1, r: 3 },
Â Â Â Â Â Â Â  { id:
"mehrauli", name: "Mehrauli", q: -2, r: 3 },
Â Â Â Â Â Â Â  { id:
"vasant-vihar", name: "Vasant Vihar", q: -3, r: 2 },
Â Â Â Â Â Â Â  { id:
"sarita-vihar", name: "Sarita Vihar", q: 0, r: 3 },
Â Â Â Â Â Â Â  { id:
"dwarka", name: "Dwarka", q: -3, r: 1 },
Â Â Â Â Â Â Â  { id:
"najafgarh", name: "Najafgarh", q: -3, r: 0 },
Â Â Â Â Â Â Â  { id:
"patel-nagar", name: "Patel Nagar", q: 0, r: 1 },
Â Â Â Â Â Â Â  { id:
"rajouri-garden", name: "Rajouri Garden", q: -1, r: 1 },
Â Â Â Â Â Â Â  { id:
"punjabi-bagh", name: "Punjabi Bagh", q: -2, r: 1 },
Â Â Â Â Â Â Â  { id:
"janakpuri", name: "Janakpuri", q: -2, r: 2 },
Â Â Â Â Â Â Â  { id:
"tilak-nagar", name: "Tilak Nagar", q: -1, r: 2 },
Â Â Â Â Â Â Â  { id:
"r-k-puram", name: "R.K. Puram", q: -2, r: -1 },
Â Â Â Â Â Â Â  { id:
"jamia-nagar", name: "Jamia Nagar", q: 1, r: 2 },
Â Â Â Â Â Â Â  { id:
"sarojini-nagar", name: "Sarojini Nagar", q: -1, r: -2 },
Â Â Â Â Â Â Â  { id:
"delhi-cantt", name: "Delhi Cantt", q: -2, r: -2 },
Â Â Â Â Â Â Â  { id:
"daryaganj", name: "Daryaganj", q: 1, r: -2 },
Â Â Â  ];
Â 
Â Â Â  // Generate sample
policies (Dummy Data)
Â Â Â  const policies =
{};
Â Â Â subdivisions.forEach(d => {
Â Â Â Â Â Â Â  const count =
Math.floor(Math.random() * 3) + 1;
Â Â Â Â Â Â Â  policies[d.id]
= Array.from({ length: count }).map((_, j) => ({
Â Â Â Â Â Â Â Â Â Â Â  title:
`${d.name} Policy ${j + 1}`,
Â Â Â Â Â Â Â Â Â Â Â  category:
categories[Math.floor(Math.random() * categories.length)],
Â Â Â Â Â Â Â Â Â Â Â  year: 2023
+ Math.floor(Math.random() * 3),
Â Â Â Â Â Â Â Â Â Â Â description: "Policy to improve air quality and reduce
emissions.",
Â Â Â Â Â Â Â Â Â Â Â  link:
"https://example.com/policy"
Â Â Â Â Â Â Â  }));
Â Â Â  });
Â 
Â Â Â  const svg =
document.getElementById("hexMap");
Â Â Â  const tooltip =
document.getElementById("tooltip");
Â 
Â Â Â  // --- Hex Map
Utilities ---
Â Â Â  function
axialToPixel(q, r) {
Â Â Â Â Â Â Â  // Centering
the map in the 1200x800 viewBox
Â Â Â Â Â Â Â  return { 
Â Â Â Â Â Â Â Â Â Â Â  x:
HEX_SIZE * SQRT3 * (q + r / 2) + 600,
Â Â Â Â Â Â Â Â Â Â Â  y:
HEX_SIZE * 1.5 * r + 400
Â Â Â Â Â Â Â  };
Â Â Â  }
Â 
Â Â Â  function
hexPoints(cx, cy) {
Â Â Â Â Â Â Â  const pts =
[];
Â Â Â Â Â Â Â  for (let i =
0; i < 6; i++) {
Â Â Â Â Â Â Â Â Â Â Â  const a =
(60 * i - 30) * Math.PI / 180;
Â Â Â Â Â Â Â Â Â Â Â pts.push(`${cx + HEX_SIZE * Math.cos(a)},${cy + HEX_SIZE *
Math.sin(a)}`);
Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â  return
pts.join(" ");
Â Â Â  }
Â 
Â Â Â  // --- Draw Hex
Map ---
Â Â Â subdivisions.forEach(d => {
Â Â Â Â Â Â Â  const { x, y }
= axialToPixel(d.q, d.r);
Â Â Â Â Â Â Â  const g =
document.createElementNS("http://www.w3.org/2000/svg",
"g");
Â 
Â Â Â Â Â Â Â  // Polygon
Â Â Â Â Â Â Â  const poly =
document.createElementNS("http://www.w3.org/2000/svg",
"polygon");
Â Â Â Â Â Â Â poly.setAttribute("points", hexPoints(x, y));
Â Â Â Â Â Â Â poly.setAttribute("fill", "rgba(255,255,255,0.1)");
Â Â Â Â Â Â Â poly.setAttribute("stroke", "#0ea5e9"); /* Toned
down stroke */
Â Â Â Â Â Â Â poly.setAttribute("stroke-width", "1.5");
Â Â Â Â Â Â Â poly.classList.add("hex");
Â Â Â Â Â Â Â poly.style.transition = "fill 0.3s, transform 0.3s";
Â Â Â Â Â Â Â poly.dataset.zoneId = d.id; /* Store ID on element */
Â Â Â Â Â Â Â poly.addEventListener("click", e => selectZone(d.id, e));
Â Â Â Â Â Â Â poly.addEventListener("mousemove", e => showTooltip(e,
d.name));
Â Â Â Â Â Â Â poly.addEventListener("mouseleave", hideTooltip);
Â 
Â Â Â Â Â Â Â  // Label
Â Â Â Â Â Â Â  const text =
document.createElementNS("http://www.w3.org/2000/svg",
"text");
Â Â Â Â Â Â Â text.setAttribute("x", x);
Â Â Â Â Â Â Â text.setAttribute("y", y + 5);
Â Â Â Â Â Â Â text.setAttribute("text-anchor", "middle");
Â Â Â Â Â Â Â text.setAttribute("font-size", "22"); /* Slightly
smaller font */
Â Â Â Â Â Â Â text.setAttribute("fill", "#e0f2fe");
Â Â Â Â Â Â Â text.setAttribute("font-weight", "600");
Â Â Â Â Â Â Â text.setAttribute("paint-order", "stroke");
Â Â Â Â Â Â Â text.setAttribute("stroke", "#0d111c");
Â Â Â Â Â Â Â text.setAttribute("stroke-width", "2.0"); /* Thicker
stroke for readability */
Â Â Â Â Â Â Â text.textContent = d.name.replace(" ", "\n"); /* Use
<text> for single-line names */
Â 
Â Â Â Â Â Â Â g.appendChild(poly);
Â Â Â Â Â Â Â g.appendChild(text);
Â Â Â Â Â Â Â svg.appendChild(g);
Â Â Â  });
Â 
Â Â Â  // --- Tooltip
Logic ---
Â Â Â  function
showTooltip(e, name) {
Â Â Â Â Â Â Â tooltip.textContent = name;
Â Â Â Â Â Â Â  // Position
tooltip relative to the map container, not the viewport
Â Â Â Â Â Â Â  const mapRect
= svg.getBoundingClientRect();
Â Â Â Â Â Â Â tooltip.style.left = (e.clientX - mapRect.left) + "px";
Â Â Â Â Â Â Â tooltip.style.top = (e.clientY - mapRect.top - 35) + "px";
Â Â Â Â Â Â Â tooltip.classList.remove("hidden");
Â Â Â  }
Â Â Â  function
hideTooltip() { tooltip.classList.add("hidden"); }
Â 
Â Â Â  // --- State
Management ---
Â Â Â  let state = {
search: "", categories: new Set(), selectedZone: null };
Â 
Â Â Â  // --- Event
Handlers ---
Â Â Â document.getElementById("search").addEventListener("input",
e => {
Â Â Â Â Â Â Â  state.search =
e.target.value.toLowerCase(); refresh();
Â Â Â  });
Â 
Â Â Â document.querySelectorAll(".catItem").forEach(c =>
Â Â Â Â Â Â Â c.addEventListener("change", () => {
Â Â Â Â Â Â Â Â Â Â Â  c.checked
? state.categories.add(c.value) : state.categories.delete(c.value);
Â Â Â Â Â Â Â Â Â Â Â  refresh();
Â Â Â Â Â Â Â  })
Â Â Â  );
Â 
Â Â Â document.getElementById("resetBtn").addEventListener("click",
() => {
Â Â Â Â Â Â Â  state = {
search: "", categories: new Set(), selectedZone: null };
Â Â Â Â Â Â Â document.getElementById("search").value = "";
Â Â Â Â Â Â Â document.querySelectorAll(".catItem").forEach(c =>
c.checked = false);
Â Â Â Â Â Â Â document.querySelectorAll(".hex").forEach(h =>
h.classList.remove("active"));
Â Â Â Â Â Â Â document.getElementById("hexMap").querySelectorAll("polygon").forEach(p
=> p.setAttribute("fill", "rgba(255,255,255,0.1)"));
Â Â Â Â Â Â Â  refresh();
Â Â Â  });
Â 
Â Â Â  function
selectZone(id, e) {
Â Â Â Â Â Â Â  // Toggle Zone
selection logic
Â Â Â Â Â Â Â  const
targetHex = e.target;
Â Â Â Â Â Â Â  if
(state.selectedZone === id) {
Â Â Â Â Â Â Â Â Â Â Â  //
Deselect
Â Â Â Â Â Â Â Â Â Â Â state.selectedZone = null;
Â Â Â Â Â Â Â Â Â Â Â targetHex.classList.remove("active");
Â Â Â Â Â Â Â Â Â Â Â targetHex.setAttribute("fill",
"rgba(255,255,255,0.1)");
Â Â Â Â Â Â Â  } else {
Â Â Â Â Â Â Â Â Â Â Â  // Select
new zone
Â Â Â Â Â Â Â Â Â Â Â state.selectedZone = id;
Â Â Â Â Â Â Â Â Â Â Â document.querySelectorAll(".hex").forEach(h => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â h.classList.remove("active");
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â h.setAttribute("fill", "rgba(255,255,255,0.1)");
Â Â Â Â Â Â Â Â Â Â Â  });
Â Â Â Â Â Â Â Â Â Â Â targetHex.classList.add("active");
Â Â Â Â Â Â Â Â Â Â Â targetHex.setAttribute("fill", "#0ea5e9");
Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â  refresh();
Â Â Â  }
Â 
Â Â Â  // --- Table
Pagination ---
Â Â Â  let donut,
currentPage = 1, itemsPerPage = 100, currentRows = [];
Â Â Â document.getElementById("itemsPerPage").addEventListener("change",
e => {
Â Â Â Â Â Â Â  itemsPerPage =
parseInt(e.target.value); currentPage = 1; renderTable();
Â Â Â  });
Â Â Â document.getElementById("prevPage").addEventListener("click",
() => {
Â Â Â Â Â Â Â  if
(currentPage > 1) { currentPage--; renderTable(); }
Â Â Â  });
Â Â Â document.getElementById("nextPage").addEventListener("click",
() => {
Â Â Â Â Â Â Â  const max =
Math.ceil(currentRows.length / itemsPerPage);
Â Â Â Â Â Â Â  if
(currentPage < max) { currentPage++; renderTable(); }
Â Â Â  });
Â 
Â Â Â  function
renderTable() {
Â Â Â Â Â Â Â  const tbody =
document.getElementById("policyTable"), info =
document.getElementById("pageInfo");
Â Â Â Â Â Â Â  const start =
(currentPage - 1) * itemsPerPage, end = start + itemsPerPage;
Â Â Â Â Â Â Â  const slice =
currentRows.slice(start, end);
Â Â Â Â Â Â Â tbody.innerHTML = slice.length ? slice.join("") :
`<tr><td colspan="6" class="px-3 py-2 text-center text-slate-800">No
policies match the current filters.</td></tr>`;
Â Â Â Â Â Â Â  
Â Â Â Â Â Â Â  const
totalRows = currentRows.length;
Â Â Â Â Â Â Â  const shownEnd
= Math.min(end, totalRows);
Â Â Â Â Â Â Â info.textContent = totalRows > 0 ? `Showing ${start + 1}â€“${shownEnd}
of ${totalRows}` : "No data";
Â 
Â Â Â Â Â Â Â  //
Disable/Enable buttons
Â Â Â Â Â Â Â document.getElementById("prevPage").disabled = currentPage ===
1;
Â Â Â Â Â Â Â document.getElementById("nextPage").disabled = currentPage ===
Math.ceil(totalRows / itemsPerPage) || totalRows === 0;
Â Â Â  }
Â 
Â Â Â  // --- Core
Refresh Function ---
Â Â Â  function
getFilteredPolicies() {
Â Â Â Â Â Â Â  const filtered
= {};
Â Â Â Â Â Â Â  const zones =
state.selectedZone ? [state.selectedZone] : Object.keys(policies);
Â Â Â Â Â Â Â zones.forEach(id => {
Â Â Â Â Â Â Â Â Â Â Â filtered[id] = policies[id].filter(p => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  const
matchCat = state.categories.size === 0 || state.categories.has(p.category);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  const
matchSearch = !state.search || p.title.toLowerCase().includes(state.search) ||
p.description.toLowerCase().includes(state.search);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  return
matchCat && matchSearch;
Â Â Â Â Â Â Â Â Â Â Â  });
Â Â Â Â Â Â Â  });
Â Â Â Â Â Â Â  return
filtered;
Â Â Â  }
Â 
Â Â Â  function refresh()
{
Â Â Â Â Â Â Â  const filtered
= getFilteredPolicies();
Â Â Â Â Â Â Â  const catCount
= {};
Â Â Â Â Â Â Â Object.values(filtered).flat().forEach(p => catCount[p.category] =
(catCount[p.category] || 0) + 1);
Â Â Â Â Â Â Â  const labels =
Object.keys(catCount), values = Object.values(catCount);
Â Â Â Â Â Â Â  
Â Â Â Â Â Â Â  // --- 1.
Update Donut Chart ---
Â Â Â Â Â Â Â  if (donut)
donut.destroy();
Â Â Â Â Â Â Â  donut = new
Chart(document.getElementById("donut"), {
Â Â Â Â Â Â Â Â Â Â Â  type:
"doughnut",
Â Â Â Â Â Â Â Â Â Â Â  data: {
labels, datasets: [{ data: values, backgroundColor: labels.map(l =>
chartColors[l] || "#e5e7eb") }] },
Â Â Â Â Â Â Â Â Â Â Â  options: {
cutout: "65%", plugins: { legend: { display: false } } }
Â Â Â Â Â Â Â  });
Â 
Â Â Â Â Â Â Â  const zoneName
= state.selectedZone ? subdivisions.find(s => s.id ===
state.selectedZone)?.name : "All Zones";
Â Â Â Â Â Â Â document.getElementById("donutTitle").textContent = `Policy
Type â€“ ${zoneName}`;
Â Â Â Â Â Â Â document.getElementById("donutCenter").innerHTML =
values.reduce((a, b) => a + b, 0) + "<br>Policies";
Â Â Â Â Â Â Â document.getElementById("legend").innerHTML = labels.map((l,
i) => 
Â Â Â Â Â Â Â Â Â Â Â  `<li
class='flex justify-between'>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class='flex items-center gap-2'>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span style='background-color: ${chartColors[l]}; width: 10px;
height: 10px; border-radius: 50%; display: inline-block;'></span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ${l}
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span>${values[i]}</span>
Â Â Â Â Â Â Â Â Â Â Â </li>`
Â Â Â Â Â Â Â ).join("");
Â 
Â Â Â Â Â Â Â  // --- 2.
Generate AI Recommendations ---
Â Â Â Â Â Â Â  const rec =
[];
Â Â Â Â Â Â Â Object.entries(filtered).forEach(([id, arr]) => {
Â Â Â Â Â Â Â Â Â Â Â  const zone
= subdivisions.find(z => z.id === id)?.name || id;
Â Â Â Â Â Â Â Â Â Â Â arr.forEach(p => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if
(p.category === "Dust Control") rec.push(`ğŸ’§
Enhance road sprinkling in ${zone}`);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if
(p.category === "Traffic Mgmt") rec.push(`ğŸš—
Expand $\text{PUC}$ checks & signal timing in ${zone}`);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if
(p.category === "EV & Mobility") rec.push(`âš¡
Promote $\text{EV}$ charging stations in ${zone}`);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if
(p.category === "Regulation") rec.push(`ğŸ“œ
Enforce strict vehicle norms in ${zone}`);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if
(p.category === "Monitoring") rec.push(`ğŸ“ˆ
Add real-time $\text{AQI}$ sensors in ${zone}`);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if
(p.category === "Source Control") rec.push(`ğŸ­
Focus industrial emission audits in ${zone}`);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if
(p.category === "Technology") rec.push(`ğŸ›°ï¸
Deploy satellite-linked pollution tracking in ${zone}`);
Â Â Â Â Â Â Â Â Â Â Â  });
Â Â Â Â Â Â Â  });
Â Â Â Â Â Â Â  
Â Â Â Â Â Â Â  const
uniqueRec = [...new Set(rec)].slice(0, 9); // Limit to 9 unique recommendations
Â Â Â Â Â Â Â document.getElementById("aiCards").innerHTML =
uniqueRec.length ? uniqueRec.map(r => 
Â Â Â Â Â Â Â Â Â Â Â  `<div
class='border border-white/20 bg-white/10 p-3 rounded hover:bg-sky-500/20
transition text-sm'>${r}</div>`
Â Â Â Â Â Â Â ).join("") : `<p class='text-slate-800 p-3'>AI
suggestions appear based on current policy data and active filters.</p>`;
Â 
Â Â Â Â Â Â Â  // --- 3.
Render Policy Table ---
Â Â Â Â Â Â Â  // --- 3.
Render Policy Table (with Grouping) ---
const groupedByZone = {};
Object.entries(filtered).forEach(([id, arr]) => {
Â Â Â  if (arr.length
> 0) { // Only process zones that have policies
Â Â Â Â Â Â Â  const zoneName
= subdivisions.find(s => s.id === id)?.name || id;
Â Â Â Â Â Â Â  if
(!groupedByZone[zoneName]) {
Â Â Â Â Â Â Â Â Â Â Â groupedByZone[zoneName] = [];
Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â groupedByZone[zoneName].push(...arr);
Â Â Â  }
});
Â 
const rows = [];
for (const zoneName in groupedByZone) {
Â Â Â  // Add a header
row for the zone
Â Â Â  rows.push(`
Â Â Â Â Â Â Â  <tr>
Â Â Â Â Â Â Â Â Â Â Â  <td
colspan="6" class="px-4 py-2 bg-sky-100 font-bold text-sky-800
border border-white/20">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ${zoneName}
Â Â Â Â Â Â Â Â Â Â Â </td>
Â Â Â Â Â Â Â  </tr>
Â Â Â  `);
Â Â Â  
Â Â Â  // Add the policy
rows for that zone
Â Â Â groupedByZone[zoneName].forEach(p => {
Â Â Â Â Â Â Â  rows.push(`
Â Â Â Â Â Â Â Â Â Â Â  <tr
class="hover:bg-white/10 transition">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <td
class="px-4 py-3 border border-white/20 text-slate-500 italic
text-sm">${zoneName}</td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <td
class="px-4 py-3 border border-white/20">${p.title}</td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <td
class="px-4 py-3 border border-white/20">${p.year}</td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <td
class="px-4 py-3 border border-white/20">${p.category}</td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <td
class="px-4 py-3 border
border-white/20">${p.description}</td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <td
class="px-4 py-3 border border-white/20 text-center"><a
href="${p.link}" target="_blank" class="text-sky-600
hover:underline">Link</a></td>
Â Â Â Â Â Â Â Â Â Â Â </tr>
Â Â Â Â Â Â Â  `);
Â Â Â  });
}
currentRows = rows; currentPage = 1; renderTable();
Â Â Â Â Â Â Â  
Â Â Â  }
Â Â Â  
Â Â Â  // Initial load
Â Â Â  refresh();
Â Â Â  </script>
</body>
Â 
</html>

